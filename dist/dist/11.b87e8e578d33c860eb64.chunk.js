webpackJsonp([11],{276:function(t,e,a){"use strict";function c(t){s||a(577)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(427),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);var r=a(583),l=a.n(r),s=!1,h=a(2),u=c,d=h(i.a,l.a,!1,u,"data-v-91f3b08a",null);d.options.__file="src\\views\\new-components\\batch-operating\\batch-operating.vue",e.default=d.exports},350:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=[{value:"Y",label:"合同档案"},{value:"KJ",label:"会计档案"},{value:"SB",label:"设备档案"},{value:"WS",label:"文书档案"},{value:"ZL",label:"资料档案"},{value:"JJ",label:"基建档案"},{value:"SW",label:"实物档案"},{value:"SX",label:"声像档案"},{value:"RS",label:"人事档案"}];e.archiveType=c},427:function(t,e,a){"use strict";function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(118),i=c(o),n=a(579),r=c(n),l=a(350);e.default={data:function(){return{columns4:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"合同编号",key:"contractNo",width:100},{title:"合同名称",key:"contractName",width:100},{title:"腾邦签署主体",key:"signedSubject",width:110},{title:"档案归属",key:"groupCompany",width:100},{title:"业务内容摘要",key:"businessBrief",width:110},{title:"对方公司名称",key:"oppositeCompany",width:110},{title:"类别",key:"enteringType",width:110},{title:"状态",key:"statusDesc",width:80},{title:"档案室",key:"archiveRoom",width:100},{title:" 柜号",key:"cabinet",width:60},{title:" 列号",key:"columnNo",width:60},{title:" 行号",key:"rowNo",width:60},{title:" 件号",key:"piece",width:60}],batchOperationData:[],checkBoxSelectedData:[]}},computed:{checkedNum:function(){return this.checkBoxSelectedData.length}},components:{fileListsTop:r.default},methods:{handleSelectAll:function(t){this.$refs.selection.selectAll(t)},handleRowChange:function(){},getSelectedDataLength:function(){return this.checkBoxSelectedData.length},selectOneRow:function(t,e){this.checkBoxSelectedData=t},selectAllRow:function(t){this.checkBoxSelectedData=t},selectionChange:function(t){this.checkBoxSelectedData=t},getBatchOperatingData:function(){var t=this,e=new FormData;e.append("archiveType",l.archiveType[0].value);var a=this.$Message.loading({content:"Loading...",duration:0});this.$axios.post("/common/batch/find",e).then(function(e){t.batchOperationData=e.data.data;var c=!0,o=!1,n=void 0;try{for(var r,l=(0,i.default)(t.batchOperationData);!(c=(r=l.next()).done);c=!0){var s=r.value;s.archiveRoom=s.hasOwnProperty("archiveMaterialStock")?s.archiveMaterialStock.archiveRoom:"",s.cabinet=s.hasOwnProperty("archiveMaterialStock")?s.archiveMaterialStock.cabinet:"",s.columnNo=s.hasOwnProperty("archiveMaterialStock")?s.archiveMaterialStock.columnNo:"",s.rowNo=s.hasOwnProperty("archiveMaterialStock")?s.archiveMaterialStock.rowNo:"",s.piece=s.hasOwnProperty("archiveMaterialStock")?s.archiveMaterialStock.piece:""}}catch(t){o=!0,n=t}finally{try{!c&&l.return&&l.return()}finally{if(o)throw n}}setTimeout(a,0),console.log(t.batchOperationData)}).catch(function(t){setTimeout(a,0),console.log("获取批量操作接口数据失败",t)})},clearSuccess:function(){this.batchOperationData=[]},moveOut:function(){var t=this;if(this.getSelectedDataLength()<=0)this.$Message.info({content:"请选择要移出的数据",duration:3,closable:!0});else{var e=new FormData;e.append("archiveType",l.archiveType[0].value);var a=!0,c=!1,o=void 0;try{for(var n,r=(0,i.default)(this.checkBoxSelectedData);!(a=(n=r.next()).done);a=!0){var s=n.value;e.append("archiveNos",s.archiveNo)}}catch(t){c=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(c)throw o}}this.$axios.post("/common/batch/delete",e).then(function(e){t.getBatchOperatingData(),t.checkBoxSelectedData=[],t.$refs.batchFileListTop.clearData.moveOutBatchModal=!0}).catch(function(t){})}},refreshBatchList:function(){this.getBatchOperatingData()},exportExcelData:function(){var t=new FormData;t.append("archiveType",this.checkBoxSelectedData[0].archiveBarcode.archiveType);var e=[],a=!0,c=!1,o=void 0;try{for(var n,r=(0,i.default)(this.checkBoxSelectedData);!(a=(n=r.next()).done);a=!0){var l=n.value;e.push(l.archiveNo)}}catch(t){c=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(c)throw o}}t.append("archiveNos",e),t.append("operateDesc","BATCH"),this.$axios({method:"post",url:"/common/export",data:t,responseType:"blob"}).then(function(t){console.log(t);var e=t.data,a=new FileReader;a.readAsDataURL(e),a.onload=function(t){var e=document.createElement("a");e.download="excel.xlsx",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}).catch(function(t){console.log("下载文件失败"+t)})}},created:function(){this.getBatchOperatingData()},beforeCreate:function(){},activated:function(){},deactivated:function(){}}},428:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=a(350);e.default={props:["checkedNum"],data:function(){return{batchData:{clearSuccessModal:!1,clearSuccessTitle:"清空列表",moveOutBatchModal:!1,moveOutBatchOperationTitle:"移出批量操作",exportExcel:!1,exportBoxTitle:"批量导出"}}},methods:{clearList:function(){var t=this,e=new FormData;e.append("archiveType",c.archiveType[0].value),this.$axios.post("/common/batch/delete",e).then(function(e){t.$emit("clearSuccess"),t.batchData.clearSuccessModal=!0}).catch(function(t){})},moveOutBatchOperation:function(){this.$emit("moveOut")},clearSuccess:function(){this.batchData.clearSuccessModal=!1},moveOutBatchSuccess:function(){this.batchData.moveOutBatchModal=!1},refresh:function(){this.$emit("refresh")},gotoExport:function(){0===this.checkedNum?this.$Message.info({content:"请选择要导出的数据",duration:3,closable:!0}):this.batchData.exportExcel=!0},exportExcelData:function(){this.batchData.exportExcel=!1,this.$emit("exportExcelData")}}}},577:function(t,e,a){var c=a(578);"string"==typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);a(16)("2b14fd0a",c,!1)},578:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.right-main-page[data-v-91f3b08a] {\n  background-color: #fff;\n  border: 1px solid #d5dde2;\n  padding-left: 20px;\n  padding-right: 20px;\n  margin-bottom: 20px;\n  padding-bottom: 20px;\n}\n",""])},579:function(t,e,a){"use strict";function c(t){s||a(580)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(428),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);var r=a(582),l=a.n(r),s=!1,h=a(2),u=c,d=h(i.a,l.a,!1,u,"data-v-daf8312e",null);d.options.__file="src\\views\\new-components\\batch-operating\\file-lists-top\\file-lists-top.vue",e.default=d.exports},580:function(t,e,a){var c=a(581);"string"==typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);a(16)("5ab1c80a",c,!1)},581:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"",""])},582:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-top"},[a("ul",[a("li",{on:{click:t.gotoExport}},[a("Icon",{attrs:{size:"14",type:"share"}}),a("span",[t._v("导出")])],1),t._v(" "),a("li",{on:{click:t.refresh}},[a("Icon",{attrs:{size:"14",type:"android-sync"}}),a("span",[t._v("刷新")])],1),t._v(" "),a("li",[a("Icon",{attrs:{size:"14",type:"android-print"}}),a("span",[t._v("打印")])],1),t._v(" "),a("li",{staticStyle:{width:"120px"},on:{click:t.moveOutBatchOperation}},[a("Icon",{attrs:{size:"14",type:"forward"}}),a("span",[t._v("移出批量操作")])],1),t._v(" "),a("li",{on:{click:t.clearList}},[a("Icon",{attrs:{size:"14",type:"trash-a"}}),a("span",[t._v("清空")])],1)]),t._v(" "),a("Modal",{attrs:{title:t.batchData.clearSuccessTitle,"mask-closable":!1,width:"620"},model:{value:t.batchData.clearSuccessModal,callback:function(e){t.$set(t.batchData,"clearSuccessModal",e)},expression:"batchData.clearSuccessModal"}},[a("div",{staticClass:"searchBox"},[a("div",[t._v("列表清空成功！")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.clearSuccess}},[t._v("确定")])],1)]),t._v(" "),a("Modal",{attrs:{title:t.batchData.moveOutBatchOperationTitle,"mask-closable":!1,width:"620"},model:{value:t.batchData.moveOutBatchModal,callback:function(e){t.$set(t.batchData,"moveOutBatchModal",e)},expression:"batchData.moveOutBatchModal"}},[a("div",{staticClass:"searchBox"},[a("div",[t._v("移出批量操作成功！")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.moveOutBatchSuccess}},[t._v("确定")])],1)]),t._v(" "),a("Modal",{attrs:{title:t.batchData.exportBoxTitle,"mask-closable":!1,width:"620"},model:{value:t.batchData.exportExcel,callback:function(e){t.$set(t.batchData,"exportExcel",e)},expression:"batchData.exportExcel"}},[a("div",{staticClass:"searchBox"},[a("div",[t._v("您确定要将选定项导出Excel表格吗")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.exportExcelData}},[t._v("确定")]),t._v(" "),a("Button",{on:{click:function(e){t.batchData.exportExcel=!1}}},[t._v("取消")])],1)])],1)},o=[];c._withStripped=!0;var i={render:c,staticRenderFns:o};e.default=i},583:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right-main-page"},[a("fileListsTop",{ref:"batchFileListTop",attrs:{checkedNum:t.checkedNum},on:{clearSuccess:t.clearSuccess,moveOut:t.moveOut,refresh:t.refreshBatchList,exportExcelData:t.exportExcelData}}),t._v(" "),a("Table",{ref:"selection",attrs:{"highlight-row":"",border:"",columns:t.columns4,data:t.batchOperationData},on:{"on-current-change":t.handleRowChange,"on-select":t.selectOneRow,"on-select-all":t.selectAllRow,"on-selection-change":t.selectionChange}})],1)},o=[];c._withStripped=!0;var i={render:c,staticRenderFns:o};e.default=i}});